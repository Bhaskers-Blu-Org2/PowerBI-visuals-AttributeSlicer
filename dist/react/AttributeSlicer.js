!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jQuery"),require("React"),require("ReactDOM"));else if("function"==typeof define&&define.amd)define(["jQuery","React","ReactDOM"],t);else{var n="object"==typeof exports?t(require("jQuery"),require("React"),require("ReactDOM")):t(e.jQuery,e.React,e.ReactDOM);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(5),r=n(6),a=n(1),o=n(4),l=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.componentDidMount=function(){this.node=r.findDOMNode(this),this.mySlicer=new o.AttributeSlicer(a(this.node)),this.attachEvents(),this.renderContent()},t.prototype.componentWillReceiveProps=function(e){this.renderContent(e)},t.prototype.render=function(){return s.createElement("div",{className:"advanced-slicer-container",style:{width:"100%",height:"100%"}})},t.prototype.attachEvents=function(){var e=this,t=function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];e.props[t]&&e.props[t].apply(e,n)}};this.mySlicer.events.on("loadMoreData",t("onLoadMoreData")),this.mySlicer.events.on("canLoadMoreData",t("onCanLoadMoreData")),this.mySlicer.events.on("selectionChanged",t("onSelectionChanged"))},t.prototype.renderContent=function(e){e=e||this.props,this.mySlicer.showHighlight=e.showHighlight,this.mySlicer.showValues=e.showValues,this.mySlicer.showSelections=e.showSelections,this.mySlicer.serverSideSearch=e.serverSideSearch,this.mySlicer.data=e.data},t}(s.Component);t.AttributeSlicer=l},function(t,n){t.exports=e},function(e,t){"use strict";e.exports=function n(e,t){var i,s,r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,c=/^0/,h=function(e){return n.insensitive&&(""+e).toLowerCase()||""+e},d=h(e).replace(a,"")||"",p=h(t).replace(a,"")||"",u=d.replace(r,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),f=p.replace(r,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),m=parseInt(d.match(l),16)||1!==u.length&&d.match(o)&&Date.parse(d),g=parseInt(p.match(l),16)||m&&p.match(o)&&Date.parse(p)||null;if(g){if(g>m)return-1;if(m>g)return 1}for(var v=0,y=Math.max(u.length,f.length);y>v;v++){if(i=!(u[v]||"").match(c)&&parseFloat(u[v])||u[v]||0,s=!(f[v]||"").match(c)&&parseFloat(f[v])||f[v]||0,isNaN(i)!==isNaN(s))return isNaN(i)?1:-1;if(typeof i!=typeof s&&(i+="",s+=""),s>i)return-1;if(i>s)return 1}return 0}},function(e,t){"use strict";var n=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){var n=this,i=this.listeners[e]=this.listeners[e]||[];return i.push(t),{destroy:function(){n.off(e,t)}}},e.prototype.off=function(e,t){var n=this.listeners[e];if(n){var i=n.indexOf(t);i>=0&&n.splice(i,1)}},e.prototype.raiseEvent=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=this.listeners[e];s&&s.forEach(function(e){e.apply(t,n)})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var i=n(3),s=n(1),r=n(2),a=function(){function e(t){var n=this;this._data=[],this._eventEmitter=new i["default"],this.loadingSearch=!1,this._serverSideSearch=!0,this._selectedItems=[],this._loadingMoreData=!1,this.element=t,this.listContainer=t.append(s(e.template)).find(".advanced-slicer"),this.listEle=this.listContainer.find(".list"),this.listEle.scroll(function(){return n.checkLoadMoreData()}),this.selectionsEle=t.find(".selections"),this.checkAllEle=t.find(".check-all").on("click",function(){return n.toggleSelectAll()}),this.clearAllEle=t.find(".clear-all").on("click",function(){return n.clearSelection()}),this.attachEvents(),this.loadingMoreData=!0}return Object.defineProperty(e.prototype,"serverSideSearch",{get:function(){return this._serverSideSearch},set:function(e){this._serverSideSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventEmitter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{set:function(e){this.listEle.find(".display-container").css({width:"100%"}),this.listEle.css({width:"100%",height:e.height-this.element.find(".slicer-options").height()-10})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showValues",{set:function(e){this.element.toggleClass("has-values",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelections",{set:function(e){this.element.toggleClass("show-selections",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHighlight",{get:function(){return this.element.hasClass("show-highlight")},set:function(e){this.element.toggleClass("show-highlight",!!e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this.listEle.empty(),this.loadingMoreData=!1,t&&t.length&&(this.listEle.append(t.map(function(t){var n=e.listItemFactory(t.matchPrefix,t.match,t.matchSuffix),i=t.renderedValue;if(i){var s=n.find(".value-display");s.css({width:i+"%"}),s.find(".value").html(""+t.value)}return n[t.selected?"hide":"show"].call(n),n.find("input").prop("checked",t.selected),n.data("item",t),n})),this.loadingSearch=!0,this.element.find(".searchbox").val(this.searchString),this.loadingSearch=!1),this._data=t,this.updateSelectAllButtonState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){return this._selectedItems},set:function(e){var t=this,n=this.selectedItems.slice(0);this._selectedItems=e;var i=e&&e.length===this.data.length,s=e&&e.length>0&&!i;this.syncItemVisiblity(),e&&(this.selectionsEle.find(".token").remove(),e.map(function(e){return t.createSelectionToken(e)}).forEach(function(e){return e.insertBefore(t.element.find(".clear-all"))})),this.raiseSelectionChanged(this.selectedItems,n),this.checkAllEle.prop("checked",s),this.checkAllEle.prop("indeterminate",s)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchString",{get:function(){return this.element.find(".searchbox").val()},enumerable:!0,configurable:!0}),e.prototype.sort=function(e,t){this.data.sort(function(n,i){var s=r(n[e],i[e]);return t?-1*s:s})},Object.defineProperty(e.prototype,"loadingMoreData",{get:function(){return this._loadingMoreData},set:function(e){this._loadingMoreData=e,this.element.toggleClass("loading",e)},enumerable:!0,configurable:!0}),e.prototype.syncItemVisiblity=function(){var e=this.selectedItems,t=this.element.find(".item"),n=this,i=function(e,t){return(e.match+""||"").indexOf(t)>=0||(e.matchPrefix+""||"").indexOf(t)>=0||(e.matchSuffix+""||"").indexOf(t)>=0};t.each(function(){var t=s(this).data("item"),r=!(e&&e.filter(function(e){return e.equals(t)}).length>0);r&&!n.serverSideSearch&&n.searchString&&(r=i(t,n.searchString)),s(this).toggle(r)})},e.prototype.toggleSelectAll=function(){var e=this.checkAllEle.prop("checked");e?this.selectedItems=this._data.slice(0):this.selectedItems=[]},e.prototype.createSelectionToken=function(e){var t=this,n=s("<div/>"),i=(e.matchPrefix||"")+e.match+(e.matchSuffix||"");return n.addClass("token").attr("title",i).data("item",e).on("click",function(){n.remove();var i=t.selectedItems.filter(function(t){return t.equals(e)})[0];t.selectedItems.splice(t.selectedItems.indexOf(i),1),t.selectedItems=t.selectedItems.slice(0)}).text(i),n},e.prototype.clearSelection=function(){this.selectedItems=[]},e.prototype.updateSelectAllButtonState=function(){this.checkAllEle.prop("indeterminate",this.selectedItems.length>0&&this._data.length!==this.selectedItems.length),this.checkAllEle.prop("checked",this.selectedItems.length>0)},e.prototype.attachEvents=function(){var t=this;this.element.find(".searchbox").on("input",_.debounce(function(){t.loadingSearch||(t.serverSideSearch&&setTimeout(function(){return t.checkLoadMoreDataBasedOnSearch()},10),t.syncItemVisiblity(),t.element.toggleClass("has-search",!!t.searchString))},e.SEARCH_DEBOUNCE)),this.listEle.on("click",function(e){var n=s(e.target).parents(".item");if(n.length>0){var i=n.data("item");t.selectedItems.push(i),t.selectedItems=t.selectedItems.slice(0),t.updateSelectAllButtonState()}e.stopImmediatePropagation(),e.stopPropagation()})},e.prototype.checkLoadMoreDataBasedOnSearch=function(){this.raiseCanLoadMoreData(!0)&&(this.loadPromise&&(this.loadPromise.cancel=!0),this.loadingMoreData=!1,this.raiseLoadMoreData(!0))},e.prototype.checkLoadMoreData=function(){var e=this.listEle[0],t=e.scrollHeight,n=e.scrollTop,i=t-(n+e.clientHeight)<200&&t>=200;i&&!this.loadingMoreData&&this.raiseCanLoadMoreData()&&this.raiseLoadMoreData(!1)},e.prototype.raiseLoadMoreData=function(e){var t=this,n={};if(this.events.raiseEvent("loadMoreData",n,e,this.searchString),n.result){this.loadingMoreData=!0;var i=this.loadPromise=n.result.then(function(n){return i.cancel?void 0:(t.loadingMoreData=!1,t.loadPromise=void 0,e?t.data=n:t.data=t.data.concat(n),setTimeout(function(){return t.checkLoadMoreData()},10),n)},function(){t.data=[],t.loadingMoreData=!1});return i}},e.prototype.raiseCanLoadMoreData=function(e){e===void 0&&(e=!1);var t={result:!1};return this.events.raiseEvent("canLoadMoreData",t,e),t.result},e.prototype.raiseSelectionChanged=function(e,t){this.events.raiseEvent("selectionChanged",e,t)},e.SEARCH_DEBOUNCE=500,e.template='\n        <div class="advanced-slicer">\n            <div class="slicer-options">\n                <input class="searchbox" placeholder="Search" />\n                <div style="margin:0;padding:0;margin-top:5px;">\n                <div class="selection-container">\n                    <div class="selections">\n                        <span class="clear-all">Clear All</span>\n                    </div>\n                </div>\n                <!-- Disabled -->\n                <label style="display:none;vertical-align:middle"><input class="check-all" type="checkbox" style="margin-right:5px;vertical-align:middle"/>&nbsp;Select All</label>\n                </div>\n                <hr/>\n            </div>\n            <div class="list" style="overflow:hidden;overflow-y:auto"></div>\n            <div class=\'load-spinner\' style=\'transform:scale(0.6);\'><div>\n        </div>\n    '.trim().replace(/\n/g,""),e.listItemFactory=function(e,t,n){return s(('\n            <div style="white-space:nowrap" class="item">\n                <label style="cursor:pointer">\n                    <!--<input style="vertical-align:middle;cursor:pointer" type="checkbox">-->\n                    <span style="margin-left: 5px;vertical-align:middle" class="display-container">\n                        <span style="display:inline-block;overflow:hidden" class="category-container">\n                            <span class="matchPrefix">'+(e||"")+'</span>\n                            <span class="match">'+(t||"")+'</span>\n                            <span class="matchSuffix">'+(n||"")+'</span>\n                        </span>\n                        <span style="display:inline-block" class="value-container">\n                            <span style="display:inline-block;width:0px" class="value-display">&nbsp;<span class="value"></span></span>\n                        </span>\n                    </span>\n                </label>\n            </div>\n        ').trim().replace(/\n/g,""))},e}();t.AttributeSlicer=a},function(e,n){e.exports=t},function(e,t){e.exports=n}])});