!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jQuery"));else if("function"==typeof define&&define.amd)define(["jQuery"],t);else{var i=t("object"==typeof exports?require("jQuery"):e.jQuery);for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(this,function(e){return function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";var n=i(2),a=i(3),s=i(1),r=function(){function e(t){var i=this;this._data=[],this._eventEmitter=new n["default"],this.loadingSearch=!1,this._serverSideSearch=!0,this._selectedItems=[],this._loadingMoreData=!1,this.element=t,this.listContainer=t.append(a(e.template)).find(".advanced-slicer"),this.listEle=this.listContainer.find(".list"),this.listEle.scroll(function(){return i.checkLoadMoreData()}),this.selectionsEle=t.find(".selections"),this.checkAllEle=t.find(".check-all").on("click",function(){return i.toggleSelectAll()}),this.clearAllEle=t.find(".clear-all").on("click",function(){return i.clearSelection()}),this.attachEvents(),this.loadingMoreData=!0}return Object.defineProperty(e.prototype,"serverSideSearch",{get:function(){return this._serverSideSearch},set:function(e){this._serverSideSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventEmitter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{set:function(e){this.listEle.find(".display-container").css({width:"100%"}),this.listEle.css({width:"100%",height:e.height-this.element.find(".slicer-options").height()-10})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showValues",{set:function(e){this.element.toggleClass("has-values",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelections",{set:function(e){this.element.toggleClass("show-selections",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHighlight",{get:function(){return this.element.hasClass("show-highlight")},set:function(e){this.element.toggleClass("show-highlight",!!e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this.listEle.empty(),this.loadingMoreData=!1,t&&t.length&&(this.listEle.append(t.map(function(t){var i=e.listItemFactory(t.matchPrefix,t.match,t.matchSuffix),n=t.renderedValue;if(n){var a=i.find(".value-display");a.css({width:n+"%"}),a.find(".value").html(""+t.value)}return i[t.selected?"hide":"show"].call(i),i.find("input").prop("checked",t.selected),i.data("item",t),i})),this.loadingSearch=!0,this.element.find(".searchbox").val(this.searchString),this.loadingSearch=!1),this._data=t,this.updateSelectAllButtonState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){return this._selectedItems},set:function(e){var t=this,i=this.selectedItems.slice(0);this._selectedItems=e;var n=e&&e.length===this.data.length,a=e&&e.length>0&&!n;this.syncItemVisiblity(),e&&(this.selectionsEle.find(".token").remove(),e.map(function(e){return t.createSelectionToken(e)}).forEach(function(e){return e.insertBefore(t.element.find(".clear-all"))})),this.raiseSelectionChanged(this.selectedItems,i),this.checkAllEle.prop("checked",a),this.checkAllEle.prop("indeterminate",a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchString",{get:function(){return this.element.find(".searchbox").val()},enumerable:!0,configurable:!0}),e.prototype.sort=function(e,t){this.data.sort(function(i,n){var a=s(i[e],n[e]);return t?-1*a:a})},Object.defineProperty(e.prototype,"loadingMoreData",{get:function(){return this._loadingMoreData},set:function(e){this._loadingMoreData=e,this.element.toggleClass("loading",e)},enumerable:!0,configurable:!0}),e.prototype.syncItemVisiblity=function(){var e=this.selectedItems,t=this.element.find(".item"),i=this,n=function(e,t){return(e.match+""||"").indexOf(t)>=0||(e.matchPrefix+""||"").indexOf(t)>=0||(e.matchSuffix+""||"").indexOf(t)>=0};t.each(function(){var t=a(this).data("item"),s=!(e&&e.filter(function(e){return e.equals(t)}).length>0);s&&!i.serverSideSearch&&i.searchString&&(s=n(t,i.searchString)),a(this).toggle(s)})},e.prototype.toggleSelectAll=function(){var e=this.checkAllEle.prop("checked");e?this.selectedItems=this._data.slice(0):this.selectedItems=[]},e.prototype.createSelectionToken=function(e){var t=this,i=a("<div/>"),n=(e.matchPrefix||"")+e.match+(e.matchSuffix||"");return i.addClass("token").attr("title",n).data("item",e).on("click",function(){i.remove();var n=t.selectedItems.filter(function(t){return t.equals(e)})[0];t.selectedItems.splice(t.selectedItems.indexOf(n),1),t.selectedItems=t.selectedItems.slice(0)}).text(n),i},e.prototype.clearSelection=function(){this.selectedItems=[]},e.prototype.updateSelectAllButtonState=function(){this.checkAllEle.prop("indeterminate",this.selectedItems.length>0&&this._data.length!==this.selectedItems.length),this.checkAllEle.prop("checked",this.selectedItems.length>0)},e.prototype.attachEvents=function(){var t=this;this.element.find(".searchbox").on("input",_.debounce(function(){t.loadingSearch||(t.serverSideSearch&&setTimeout(function(){return t.checkLoadMoreDataBasedOnSearch()},10),t.syncItemVisiblity(),t.element.toggleClass("has-search",!!t.searchString))},e.SEARCH_DEBOUNCE)),this.listEle.on("click",function(e){var i=a(e.target).parents(".item");if(i.length>0){var n=i.data("item");t.selectedItems.push(n),t.selectedItems=t.selectedItems.slice(0),t.updateSelectAllButtonState()}e.stopImmediatePropagation(),e.stopPropagation()})},e.prototype.checkLoadMoreDataBasedOnSearch=function(){this.raiseCanLoadMoreData(!0)&&(this.loadPromise&&(this.loadPromise.cancel=!0),this.loadingMoreData=!1,this.raiseLoadMoreData(!0))},e.prototype.checkLoadMoreData=function(){var e=this.listEle[0],t=e.scrollHeight,i=e.scrollTop,n=t-(i+e.clientHeight)<200&&t>=200;n&&!this.loadingMoreData&&this.raiseCanLoadMoreData()&&this.raiseLoadMoreData(!1)},e.prototype.raiseLoadMoreData=function(e){var t=this,i={};if(this.events.raiseEvent("loadMoreData",i,e,this.searchString),i.result){this.loadingMoreData=!0;var n=this.loadPromise=i.result.then(function(i){return n.cancel?void 0:(t.loadingMoreData=!1,t.loadPromise=void 0,e?t.data=i:t.data=t.data.concat(i),setTimeout(function(){return t.checkLoadMoreData()},10),i)},function(){t.data=[],t.loadingMoreData=!1});return n}},e.prototype.raiseCanLoadMoreData=function(e){e===void 0&&(e=!1);var t={result:!1};return this.events.raiseEvent("canLoadMoreData",t,e),t.result},e.prototype.raiseSelectionChanged=function(e,t){this.events.raiseEvent("selectionChanged",e,t)},e.SEARCH_DEBOUNCE=500,e.template='\n        <div class="advanced-slicer">\n            <div class="slicer-options">\n                <input class="searchbox" placeholder="Search" />\n                <div style="margin:0;padding:0;margin-top:5px;">\n                <div class="selection-container">\n                    <div class="selections">\n                        <span class="clear-all">Clear All</span>\n                    </div>\n                </div>\n                <!-- Disabled -->\n                <label style="display:none;vertical-align:middle"><input class="check-all" type="checkbox" style="margin-right:5px;vertical-align:middle"/>&nbsp;Select All</label>\n                </div>\n                <hr/>\n            </div>\n            <div class="list" style="overflow:hidden;overflow-y:auto"></div>\n            <div class=\'load-spinner\' style=\'transform:scale(0.6);\'><div>\n        </div>\n    '.trim().replace(/\n/g,""),e.listItemFactory=function(e,t,i){return a(('\n            <div style="white-space:nowrap" class="item">\n                <label style="cursor:pointer">\n                    <!--<input style="vertical-align:middle;cursor:pointer" type="checkbox">-->\n                    <span style="margin-left: 5px;vertical-align:middle" class="display-container">\n                        <span style="display:inline-block;overflow:hidden" class="category-container">\n                            <span class="matchPrefix">'+(e||"")+'</span>\n                            <span class="match">'+(t||"")+'</span>\n                            <span class="matchSuffix">'+(i||"")+'</span>\n                        </span>\n                        <span style="display:inline-block" class="value-container">\n                            <span style="display:inline-block;width:0px" class="value-display">&nbsp;<span class="value"></span></span>\n                        </span>\n                    </span>\n                </label>\n            </div>\n        ').trim().replace(/\n/g,""))},e}();t.AttributeSlicer=r},function(e,t){"use strict";e.exports=function i(e,t){var n,a,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,r=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,c=/^0/,h=function(e){return i.insensitive&&(""+e).toLowerCase()||""+e},d=h(e).replace(r,"")||"",p=h(t).replace(r,"")||"",u=d.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),f=p.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),m=parseInt(d.match(o),16)||1!==u.length&&d.match(l)&&Date.parse(d),g=parseInt(p.match(o),16)||m&&p.match(l)&&Date.parse(p)||null;if(g){if(g>m)return-1;if(m>g)return 1}for(var v=0,y=Math.max(u.length,f.length);y>v;v++){if(n=!(u[v]||"").match(c)&&parseFloat(u[v])||u[v]||0,a=!(f[v]||"").match(c)&&parseFloat(f[v])||f[v]||0,isNaN(n)!==isNaN(a))return isNaN(n)?1:-1;if(typeof n!=typeof a&&(n+="",a+=""),a>n)return-1;if(n>a)return 1}return 0}},function(e,t){"use strict";var i=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){var i=this,n=this.listeners[e]=this.listeners[e]||[];return n.push(t),{destroy:function(){i.off(e,t)}}},e.prototype.off=function(e,t){var i=this.listeners[e];if(i){var n=i.indexOf(t);n>=0&&i.splice(n,1)}},e.prototype.raiseEvent=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var a=this.listeners[e];a&&a.forEach(function(e){e.apply(t,i)})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(t,i){t.exports=e}])});